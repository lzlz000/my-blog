---
title: js大数位运算问题
typora-root-url: ../
date: 2019-08-07 16:49:59
tags: [算法]
---

[个人主页](https://lzlz000.github.io)



由于业务的需要，最近大量使用了以前不常用的位运算操作，对遇到的一些问题做些总结

需求可以抽象为这样的逻辑:一个资源在一年中的某些周会被占用，不同事件对同一个资源的占用周不可重复。

我们知道一年最多有53周，以1代表占用，0代表为占用，64位整数（java中的long、mysql的bigint、很多语言中的int64等）可以完整储存、计算这样的信息。最关键的是“不可重复占用”的冲突检查变得非常方便且高效，仅需对两个值进行与运算判断值是否大于0 即可。

我把这个值称为“weekState”。weekState的值在项目中和该资源相关的地方被大量运用，他的处理，显示、判断被频繁使用于前后端各种地方。后来测试中发现，当周数特别大的时候，通过前端代码解析的weekState会出现问题。

其原因是javascript作为一个脚本语言，他的number类型其实对于不同运算的支持范围是不一样的...支持位运算的范围是32位整数，支持精确算术运算的最大整数为2^53次。 

为了解决这个问题，我用类似BigInteger的方式定义了一个JavaScript类，来处理前端位运算问题：

```javascript

```

