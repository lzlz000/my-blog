---
title: 编译原理笔记-文法
typora-root-url: ../
date: 2019-08-10 18:50:16
tags: 编译原理
---

[个人主页](https://lzlz000.github.io)

## 编译原理-文法

### 文法的定义

G=(V_T,V_N,P,S)

V_T: 终结符(terminal symbol)集合 是文法所定义的语言基本符号,有时成为token

V_N: 非终结符集合，可以推导出其他语法成分，有时称为语法变量

P: 产生式集合,产生式描述了将终结符和非终结符组合成串的方法,产生式的一般形式 α->β

S: 开始符号 表示分发中最大的语法成分 S∈VN

### 文法的表示

例，一个算数表达式的文法:

```
G=({id,+,*,(,)},{E},P,E)
P={
    E→E+E,
    E→E*E,
    E→-E,
    E->(E),
    E->id
}
```

**约定**: 在不引起歧义的前提下，可以只写文法的产生式表示该文法,即只写上述的P={...}

**约定**:

```
对一组由相同左部的α产生式
    a→β1,a→β2,a→β3,...,a→βn
可简写为:
    a→β1|β2|β3|...|βn
```

β1,β2,β3,...,βn称为α的候选式

**符号约定**

- 下述符号是终结符

排在前面的小写字母如a,b,c

运算符如+,-

标点符号括号,逗号等

数字0-9

粗体字符串id,if等

- 非终结符

排在前面的大写字母如ABC

大写字母S，通常表示开始符号

小写、斜体的名字

代表程序构造的大写字母如E(表达式)，T(项)，F(因子)

- 文法符号:字母表最后的大写字母如XYZ表示文法符号(即终结符或非终结符)
- 终结符号串（包括空串）: 排在后面的小写字母如uvwxyz
- 文法符号串（包括空串）:小写希腊字母如αβγ
- 除非特别说明，第一个产生式的左部就是开始符号

### 语言的定义

#### 推导(Derivations)和归约(Reductions)

推导：用产生式的右部代替左部 规约是推导的逆过程

如何判断语言是符合文法的句子？

从生成语言的角度: 从语法推导出语言

从识别语言的角度: 从语言规约为语法

#### 句型和句子

如果文法满足,S经过若干次推导可以得到串α，α是终结符和非终结符并集的克林闭包（任意个其中的元素包括空串），则α是该文法的一个**句型**

```
S=>*α, α∈(V_T∪V_N)*
```

若**句型**不包含非终结符则称为**句子**

文法解决了无穷语言的有穷表示问题

例,字母开头的字母数字串

```
S→L|LT
T→L|D|TL|TD
L→a|b|c|d|...|z
D→0|1|...|9
```

### 文法的分类

- **0型文法** 无限制文法/短语结构文法

  α→β,α至少包含一个非终结符

- **1型文法** 上下文有关文法 CSG

  α→β,|α|≤|β|产生式α符号的个数不得多于β

  由于这类文法产生式的一般形式为

  α1Aα2→α1βα2 (β≠ε) 被称为上下文有关文法

  上下文有关文法不包含空产生式

- **2型文法** 上下文无关文法 CFG

  产生式一般形式 A→β

- **3型文法** 正则文法 RG

  右线性文法 A→ωB 或 A→ω

  左线性文法 A→Bω 或 A→ω

  两种文法都是正则文法，相互等价

例,字母开头的字母数字串

```
上下文无关文法(和上文例子一样)：
S→L|LT
T→L|D|TL|TD
L→a|b|c|d|...|z
D→0|1|...|9
右线性文法：
S→a|b|...|z
S→aT|bT|...|zT
T→a|b|...|z|0|1|...|9
T→aT|bT|...|zT|0T|1T|...|9T
左线性文法：
S→a|b|...|z
S→Sa|Sb|...|Sz|S0|S1|...|S9
T→a|b|...|z|0|1|...|9
T→Ta|Tb|...|Tz|T0|T1|...|T9
```

四种文法是逐级限制、包含的关系



### CFG分析树

**根节点**的标号为文法的开始符号

**内部节点**表示对一个产生式A→B的应用

**叶子节点**的标号可以是终结符或非终结符，从左到右排列的叶子节点得到的符号串称为这棵树的**产出**(_yield_)或**边缘**(_frontier_)

分析树是推导的图形化表示

```
文法G:
E→E+E, E→E*E, E→-E, E→(E), E→id
它的一棵分析树:
  E
 / \
-   E    
  / | \
 (  E  )
  / | \
 E  +  E
```

**短语**

给定一个句型，其分析书的每一棵子树的边缘称为该句型的一个**短语**(_phrase_)

如果子树只有父子两代节点，那么这棵子树的边缘称为该句型的一个**直接短语**(_immediate  phrase_)

```
上述例子中的短语:
-(E+E), (E+E), E+E
直接短语:
E+E
```

直接短语一定是产生式的右部

**二义性文法**

判定：

对于任意一个上下文无关文法，不存在一个算法判定它是无二义性的；但能给出一组**充分条件**，满足这组条件的文法是无二义性的

注意是充分条件，不是必要条件，即满足肯定无二义性，不满足也未必有

这一段先照抄下来，暂时无法理解

